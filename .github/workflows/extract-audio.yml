- name: Upload to file storage
        id: upload
        run: |
          echo "Uploading test audio file..."
          
          # Check if file exists first
          if [ ! -f "audio.mp3" ]; then
            echo "❌ Audio file not found!"
            exit 1
          fi
          
          echo "File size: $(du -h audio.mp3)"
          
          # Try multiple upload services
          echo "Trying file.io..."
          RESPONSE=$(curl -s -F "file=@audio.mp3" https://file.io)
          echo "file.io response: $RESPONSE"
          
          # Check if file.io worked
          if echo "$RESPONSE" | grep -q '"success":true'; then
            DOWNLOAD_URL=$(echo "$RESPONSE" | grep -o '"link":"[^"]*' | cut -d'"' -f4)
            echo "✅ file.io success: $DOWNLOAD_URL"
          else
            # Try 0x0.st as backup
            echo "file.io failed, trying 0x0.st..."
            DOWNLOAD_URL=$(curl -s -F "file=@audio.mp3" https://0x0.st)
            echo "0x0.st response: $DOWNLOAD_URL"
            
            if [[ $DOWNLOAD_URL == https://* ]]; then
              echo "✅ 0x0.st success: $DOWNLOAD_URL"
            else
              echo "❌ Both upload services failed"
              exit 1
            fi
          fi
          
          echo "download_url=$DOWNLOAD_URL" >> $GITHUB_OUTPUT
          echo "Final download URL: $DOWNLOAD_URL"
